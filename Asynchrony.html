<!DOCTYPE html>
<head>
	<link rel="stylesheet" href="teststyle.css">
	<script type="text/javascript" src="qrc:///qtwebchannel/qwebchannel.js"></script>
	<script type="text/javascript">
		var olympusgui;
		
		window.onload = function() 
		{
			<!--- We'll need to work on making access to this more secure --->
			var socket = new WebSocket("ws://localhost:12345");

			socket.onclose = function() {
				console.error("web channel closed");
			};

			socket.onerror = function(error) {
				console.error("web channel error: " + error);
			};
			
			socket.onopen = function() 
			{
				new QWebChannel(socket, function(channel) {
					olympusgui = channel.objects.olympusgui;

					<!--- A property of the GUI visible to HTML --->
					var visibleProperty = olympusgui.someProperty;

					<!--- Send a message to the Gui when show me button clicked --->
					document.getElementById("showMePeep").onclick = function() {						
						olympusgui.sendCommand("ShowPeep");
					}

					<!--- Receive a message from the Gui. (Doesn't do anything right now) --->
					olympusgui.someSignal.connect(function(textFromGui) {});

					<!--- Send message on load that connected --->
					olympusgui.sendCommand("Client connected, ready to receive messages!");
					
				});
			};
		}
	
	</script>
</head>
<html>
<body>
<p>Check</p>
<ul>
	<li>Adequate peak flow</li>
	<li>Adequate tidal volume</li>
	<li>Adequate inspiratory time</li>
	<li>Adequate PEEP (COPD) <input type="button" id="showMePeep" onclick="javascript:click();" value="Show Me!"/></li>
	<li>Adequate ESENS</li>
</ul>
<a href="HighCircuitPressure.html">Back</a>
</body>
</html>